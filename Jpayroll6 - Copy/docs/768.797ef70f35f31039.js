"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[768],{8064:(C,p,l)=>{l.d(p,{D:()=>d});var r=l(1626),u=l(4438);let d=(()=>{class t{constructor(e){this.http=e,this.GetChangeOrderDetails="backend/GetChangeOrderDetails.php",this.clientsUrl="backend/getClients.php",this.employeesUrl="backend/getEmployees.php",this.changeorderurl="backend/getChangeOrder.php",this.getStatusProgressUrl="backend/GetStatusProgress.php",this.getClientChangeOrders="backend/GetChangeOrderByClientId.php",this.getChangeLogDataByChangeOrder="backend/GetChangeLogDataByChangeOrder.php",this.GetChanageLogById="backend/GetChangeLogById.php",this.getClientbyClientID="backend/GetClientByClientID.php",this.getUsers="backend/GetUser.php",this.getUsersByUserId="backend/GetUserByUserId.php",this.recentchangeorderlog="backend/GetRecentChangeOrderLog.php",this.GetProvince="backend/GetProvince.php",this.GetCountry="backend/GetCountry.php",this.GetCity="backend/GetCity.php",this.GetDistrict="backend/GetDistrict.php",this.GetSubDistrict="backend/GetSubDistrict.php",this.insertchangeorder="backend/InsertChangeOrder.php",this.InsertChangeLog="backend/InsertChangeLog.php",this.insertClient="backend/InsertClient.php",this.InsertUser="backend/InsertUser.php",this.updatechangeorder="backend/UpdateChangeOrder.php",this.updatepassword="backend/ChangePassword.php",this.forgotpassword="backend/ForgotPassword.php",this.UpdateUser="backend/UpdateUser.php",this.updatechangelog="backend/UpdateChangeLogByID.php",this.updateclient="backend/updateClient.php",this.FileUpload="backend/upload.php",this.FileUploadtoDatabase="backend/uploadfiletodatabase.php",this.sendotp="backend/otp/SendOtp.php",this.logincred="backend/LoginCred.php",this.setInactive="backend/SetInactiveDateUser.php",this.deleteChangeOrder="backend/DeleteChangeOrder.php",this.deleteChangeLog="backend/DeleteChangeLog.php"}getRecentChangeOrderLog(){return this.http.get(this.recentchangeorderlog)}getChangeOrder(){return this.http.get(this.changeorderurl)}getChangeOrderDetails(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChangeOrderDetails,{ChangeOrder:e},{headers:n})}GetUsers(){return this.http.get(this.getUsers)}insertUser(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertUser,e,{headers:n})}Updatepassword(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updatepassword,e,{headers:n})}forgotPassword(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.forgotpassword,e,{headers:n})}updateUser(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.UpdateUser,e,{headers:n})}GetUserByUserId(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getUsersByUserId,{UserID:e},{headers:n})}SetInactive(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.setInactive,e,{headers:n})}getClients(){return this.http.get(this.clientsUrl)}getChangeClient(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientChangeOrders,{clientId:e},{headers:n})}getclientByClientID(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientbyClientID,{clientId:e},{headers:n})}getProvince(){return this.http.get(this.GetProvince)}getCountry(){return this.http.get(this.GetCountry)}getCity(){return this.http.get(this.GetCity)}getDistrict(){return this.http.get(this.GetDistrict)}getSubDistrict(){return this.http.get(this.GetSubDistrict)}getEmployees(){return this.http.get(this.employeesUrl)}getStatusProgress(){return this.http.get(this.getStatusProgressUrl)}GetChangeLogDataByChangeOrder(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getChangeLogDataByChangeOrder,{ChangeOrder:e},{headers:n})}getchangelogbyId(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChanageLogById,{ChangeLogId:e},{headers:n})}uploadFile(e){return this.http.post(this.FileUpload,e)}insertChangeLog(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertChangeLog,e,{headers:n})}insertChangeRequest(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.insertchangeorder,e,{headers:n})}InsertClient(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.insertClient,e,{headers:n})}UpdateChangeOrder(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangeorder,e,{headers:n})}UpdateChangeLog(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangelog,e,{headers:n})}UpdateClient(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updateclient,e,{headers:n})}DeleteChangeOrder(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeOrder,e,{headers:n})}DeleteChangeLog(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeLog,e,{headers:n})}LoginCred(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.logincred,e,{headers:n})}sendOtpToEmail(e){const n=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.sendotp,e,{headers:n})}uploadFiletodatabase(e){return this.http.post(this.FileUploadtoDatabase,e)}getUser(){return this.user}setUser(e){this.user=e}static{this.\u0275fac=function(n){return new(n||t)(u.KVO(r.Qq))}}static{this.\u0275prov=u.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},1768:(C,p,l)=>{l.r(p),l.d(p,{default:()=>f});var r=l(4341),u=l(5974),d=l(177),t=l(4438),g=l(8064),e=l(6256);function n(a,h){if(1&a&&(t.j41(0,"div",28),t.nrm(1,"input",29),t.j41(2,"label",30),t.EFF(3),t.k0s()()),2&a){const i=h.$implicit,o=t.XpG();t.R7$(),t.Y8G("value",i.value)("readonly",o.isReadonly),t.R7$(),t.Mz_("for","cloudOption",i.value,""),t.R7$(),t.JRh(i.label)}}function m(a,h){if(1&a&&(t.j41(0,"div",28),t.nrm(1,"input",31),t.j41(2,"label",30),t.EFF(3),t.k0s()()),2&a){const i=h.$implicit,o=t.XpG();t.R7$(),t.Mz_("id","hybridOption",i.value,""),t.Y8G("value",i.value)("readonly",o.isReadonly),t.R7$(),t.Mz_("for","hybridOption",i.value,""),t.R7$(),t.JRh(i.label)}}function y(a,h){1&a&&(t.j41(0,"div",9)(1,"div",3)(2,"label",32),t.EFF(3,"Cloud Name:"),t.k0s(),t.j41(4,"div",5),t.nrm(5,"input",33),t.k0s()()())}function b(a,h){1&a&&(t.j41(0,"div",34)(1,"button",35),t.EFF(2,"Update"),t.k0s()())}let f=(()=>{class a{constructor(i,o,s,c){this.userService=i,this.fb=o,this.location=s,this.router=c,this.province=[],this.countries=[],this.City=[],this.District=[],this.SubDistrict=[],this.clientData=[],this.isReadonly=!1,this.OnCLouds=[{label:"Cloud",value:1},{label:"OnPremises",value:0}],this.Hybrids=[{label:"Hybrid",value:1},{label:"No",value:0}],this.clientDetails=this.fb.group({CustomerName:["",r.k0.required],Address:["",r.k0.required],Provinces:["",r.k0.required],Country:["",r.k0.required],City:["",r.k0.required],District:["",r.k0.required],SubDistrict:["",r.k0.required],PostalCode:["",r.k0.required],OnCloud:["",r.k0.required],Hybrid:["",r.k0.required],CloudName:["",r.k0.required]})}ngOnInit(){const i=this.location.getState();i&&i.ClientId&&(this.clientId=i.ClientId,this.fetchClient(this.clientId));const o=JSON.parse(localStorage.getItem("crud")||"{}");this.currentUserType=o,0==this.currentUserType&&(this.isReadonly=!0)}fetchClient(i){this.userService.getclientByClientID(i).subscribe({next:o=>{const s=o.data[0];this.clientDetails.patchValue({CustomerName:s.ClientName,Address:s.Address,Provinces:s.ProvinceId,Country:s.CountryId,City:s.CityId,District:s.DistrictId,SubDistrict:s.SubDistrictId,PostalCode:s.PostalCode,OnCloud:s.OnCloud,Hybrid:s.Hybrid,CloudName:s.CloudName})},error:o=>{console.error("Error in subscription:",o)}})}onUpdate(){if(this.clientDetails.valid){const i={clientId:this.clientId,clientName:this.clientDetails.get("CustomerName")?.value,countryId:this.clientDetails.get("Country")?.value,provinceId:this.clientDetails.get("Provinces")?.value,cityId:this.clientDetails.get("City")?.value,districtId:this.clientDetails.get("District")?.value,subDistrictId:this.clientDetails.get("SubDistrict")?.value,postalCode:this.clientDetails.get("PostalCode")?.value,address:this.clientDetails.get("Address")?.value,onCloud:this.clientDetails.get("OnCloud")?.value,hybrid:this.clientDetails.get("Hybrid")?.value,cloudName:1===this.clientDetails.get("OnCloud")?.value?this.clientDetails.get("CloudName")?.value:"OnPremises"};this.userService.UpdateClient(i).subscribe(o=>{alert("Form has been submmited"),this.router.navigateByUrl("/ClientStatus",{state:{}})},o=>{console.error("Error:",o),alert(o)})}else alert("Form is invalid")}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(g.D),t.rXU(r.ok),t.rXU(d.aZ),t.rXU(e.Ix))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-clien-details"]],standalone:!0,features:[t.aNF],decls:54,vars:13,consts:[[1,"container","my-5"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3","row"],["for","CustomerName",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["id","CustomerName","formControlName","CustomerName",1,"form-control",3,"readonly"],["for","customeraddress",1,"col-sm-3","col-form-label"],["id","Address","formControlName","Address",1,"form-control",3,"readonly"],[1,"row","mb-3"],[1,"col-md-6"],["for","country",1,"form-label"],["id","Country","formControlName","Country",1,"form-control",3,"readonly"],["for","province",1,"form-label"],["id","Provinces","formControlName","Provinces",1,"form-control",3,"readonly"],["for","City",1,"form-label"],["id","City","formControlName","City",1,"form-control",3,"readonly"],["for","District",1,"form-label"],["id","District","formControlName","District",1,"form-control",3,"readonly"],["for","SubDistrict",1,"form-label"],["id","SubDistrict","formControlName","SubDistrict",1,"form-control",3,"readonly"],["for","PostalCode",1,"form-label"],["id","PostalCode","formControlName","PostalCode","type","number",1,"form-control",3,"readonly"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9","d-flex","align-items-center"],["class","form-check form-check-inline custom-radio",4,"ngFor","ngForOf"],["class","row mb-3",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[1,"form-check","form-check-inline","custom-radio"],["type","radio","formControlName","OnCloud",1,"form-check-input",3,"value","readonly"],[1,"form-check-label","ms-2",3,"for"],["type","radio","formControlName","Hybrid",1,"form-check-input",3,"value","id","readonly"],["for","CloudName",1,"col-sm-3","col-form-label"],["id","CloudName","formControlName","CloudName",1,"form-control"],[1,"text-center","mt-5"],["type","submit",1,"btn","btn-success","w-100"]],template:function(o,s){if(1&o&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Client Details"),t.k0s(),t.j41(3,"form",2),t.bIt("ngSubmit",function(){return s.onUpdate()}),t.j41(4,"div",3)(5,"label",4),t.EFF(6,"Customer Name:"),t.k0s(),t.j41(7,"div",5),t.nrm(8,"input",6),t.k0s()(),t.j41(9,"div",3)(10,"label",7),t.EFF(11,"Address:"),t.k0s(),t.j41(12,"div",5),t.nrm(13,"input",8),t.k0s()(),t.j41(14,"div",9)(15,"div",10)(16,"label",11),t.EFF(17,"Country:"),t.k0s(),t.nrm(18,"input",12),t.k0s(),t.j41(19,"div",10)(20,"label",13),t.EFF(21,"Province:"),t.k0s(),t.nrm(22,"input",14),t.k0s()(),t.j41(23,"div",9)(24,"div",10)(25,"label",15),t.EFF(26,"City:"),t.k0s(),t.nrm(27,"input",16),t.k0s(),t.j41(28,"div",10)(29,"label",17),t.EFF(30,"District:"),t.k0s(),t.nrm(31,"input",18),t.k0s()(),t.j41(32,"div",9)(33,"div",10)(34,"label",19),t.EFF(35,"SubDistrict:"),t.k0s(),t.nrm(36,"input",20),t.k0s(),t.j41(37,"div",10)(38,"label",21),t.EFF(39,"Postal Code:"),t.k0s(),t.nrm(40,"input",22),t.k0s()(),t.j41(41,"div",9)(42,"div",10)(43,"label",23),t.EFF(44,"Cloud Option:"),t.k0s(),t.j41(45,"div",24),t.DNE(46,n,4,5,"div",25),t.k0s()(),t.j41(47,"div",10)(48,"label",23),t.EFF(49,"Hybrid Option:"),t.k0s(),t.j41(50,"div",24),t.DNE(51,m,4,7,"div",25),t.k0s()()(),t.DNE(52,y,6,0,"div",26)(53,b,3,0,"div",27),t.k0s()()),2&o){let c;t.R7$(3),t.Y8G("formGroup",s.clientDetails),t.R7$(5),t.Y8G("readonly",s.isReadonly),t.R7$(5),t.Y8G("readonly",s.isReadonly),t.R7$(5),t.Y8G("readonly",s.isReadonly),t.R7$(4),t.Y8G("readonly",s.isReadonly),t.R7$(5),t.Y8G("readonly",s.isReadonly),t.R7$(4),t.Y8G("readonly",s.isReadonly),t.R7$(5),t.Y8G("readonly",s.isReadonly),t.R7$(4),t.Y8G("readonly",s.isReadonly),t.R7$(6),t.Y8G("ngForOf",s.OnCLouds),t.R7$(5),t.Y8G("ngForOf",s.Hybrids),t.R7$(),t.Y8G("ngIf",1===(null==(c=s.clientDetails.get("OnCloud"))?null:c.value)),t.R7$(),t.Y8G("ngIf",1==s.currentUserType)}},dependencies:[u.ae,d.MD,d.Sq,d.bT,r.X1,r.qT,r.me,r.Q0,r.Fm,r.BC,r.cb,r.j4,r.JD],styles:[".custom-radio[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{border:2px solid #333;border-radius:50%;width:18px;height:18px}.custom-radio[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#007bff;border-color:#007bff}.custom-checkbox[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{border:2px solid #333;width:18px;height:18px}.custom-checkbox[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#007bff;border-color:#007bff}.form-control[readonly][_ngcontent-%COMP%]{background-color:#fff}.my-custom-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-list[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto;border:1px solid #ddd;background-color:#fff}"]})}}return a})()}}]);