"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[152],{8064:(C,g,h)=>{h.d(g,{D:()=>u});var r=h(1626),t=h(4438);let u=(()=>{class d{constructor(n){this.http=n,this.GetChangeOrderDetails="backend/GetChangeOrderDetails.php",this.clientsUrl="backend/getClients.php",this.employeesUrl="backend/getEmployees.php",this.changeorderurl="backend/getChangeOrder.php",this.getStatusProgressUrl="backend/GetStatusProgress.php",this.getClientChangeOrders="backend/GetChangeOrderByClientId.php",this.getChangeLogDataByChangeOrder="backend/GetChangeLogDataByChangeOrder.php",this.GetChanageLogById="backend/GetChangeLogById.php",this.getClientbyClientID="backend/GetClientByClientID.php",this.getUsers="backend/GetUser.php",this.getUsersByUserId="backend/GetUserByUserId.php",this.recentchangeorderlog="backend/GetRecentChangeOrderLog.php",this.GetProvince="backend/GetProvince.php",this.GetCountry="backend/GetCountry.php",this.GetCity="backend/GetCity.php",this.GetDistrict="backend/GetDistrict.php",this.GetSubDistrict="backend/GetSubDistrict.php",this.insertchangeorder="backend/InsertChangeOrder.php",this.InsertChangeLog="backend/InsertChangeLog.php",this.insertClient="backend/InsertClient.php",this.InsertUser="backend/InsertUser.php",this.updatechangeorder="backend/UpdateChangeOrder.php",this.updatepassword="backend/ChangePassword.php",this.forgotpassword="backend/ForgotPassword.php",this.UpdateUser="backend/UpdateUser.php",this.updatechangelog="backend/UpdateChangeLogByID.php",this.updateclient="backend/updateClient.php",this.FileUpload="backend/upload.php",this.FileUploadtoDatabase="backend/uploadfiletodatabase.php",this.sendotp="backend/otp/SendOtp.php",this.logincred="backend/LoginCred.php",this.setInactive="backend/SetInactiveDateUser.php",this.deleteChangeOrder="backend/DeleteChangeOrder.php",this.deleteChangeLog="backend/DeleteChangeLog.php"}getRecentChangeOrderLog(){return this.http.get(this.recentchangeorderlog)}getChangeOrder(){return this.http.get(this.changeorderurl)}getChangeOrderDetails(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChangeOrderDetails,{ChangeOrder:n},{headers:s})}GetUsers(){return this.http.get(this.getUsers)}insertUser(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertUser,n,{headers:s})}Updatepassword(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updatepassword,n,{headers:s})}forgotPassword(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.forgotpassword,n,{headers:s})}updateUser(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.UpdateUser,n,{headers:s})}GetUserByUserId(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getUsersByUserId,{UserID:n},{headers:s})}SetInactive(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.setInactive,n,{headers:s})}getClients(){return this.http.get(this.clientsUrl)}getChangeClient(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientChangeOrders,{clientId:n},{headers:s})}getclientByClientID(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientbyClientID,{clientId:n},{headers:s})}getProvince(){return this.http.get(this.GetProvince)}getCountry(){return this.http.get(this.GetCountry)}getCity(){return this.http.get(this.GetCity)}getDistrict(){return this.http.get(this.GetDistrict)}getSubDistrict(){return this.http.get(this.GetSubDistrict)}getEmployees(){return this.http.get(this.employeesUrl)}getStatusProgress(){return this.http.get(this.getStatusProgressUrl)}GetChangeLogDataByChangeOrder(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.getChangeLogDataByChangeOrder,{ChangeOrder:n},{headers:s})}getchangelogbyId(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChanageLogById,{ChangeLogId:n},{headers:s})}uploadFile(n){return this.http.post(this.FileUpload,n)}insertChangeLog(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertChangeLog,n,{headers:s})}insertChangeRequest(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.insertchangeorder,n,{headers:s})}InsertClient(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.insertClient,n,{headers:s})}UpdateChangeOrder(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangeorder,n,{headers:s})}UpdateChangeLog(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangelog,n,{headers:s})}UpdateClient(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.updateclient,n,{headers:s})}DeleteChangeOrder(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeOrder,n,{headers:s})}DeleteChangeLog(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeLog,n,{headers:s})}LoginCred(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.logincred,n,{headers:s})}sendOtpToEmail(n){const s=new r.Lr({"Content-Type":"application/json"});return this.http.post(this.sendotp,n,{headers:s})}uploadFiletodatabase(n){return this.http.post(this.FileUploadtoDatabase,n)}getUser(){return this.user}setUser(n){this.user=n}static{this.\u0275fac=function(s){return new(s||d)(t.KVO(r.Qq))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},5152:(C,g,h)=>{h.r(g),h.d(g,{default:()=>T});var r=h(7651),t=h(4438),u=h(8064),d=h(1165),_=h(177),n=h(9417),s=h(3380),m=h(8834);const f=(i,c)=>({top:i,left:c});function b(i,c){if(1&i){const e=t.RV6();t.j41(0,"a",23),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onAdd())}),t.j41(1,"button",24),t.EFF(2,"Add"),t.k0s()()}}function w(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",25),t.bIt("contextmenu",function(o){const p=t.eBV(e).row,l=t.XpG();return t.Njj(l.onContextMenu(o,p))}),t.EFF(1),t.k0s()}if(2&i){const e=c.row;t.R7$(),t.SpI(" ",e.ClientName," ")}}function y(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",25),t.bIt("contextmenu",function(o){const p=t.eBV(e).row,l=t.XpG();return t.Njj(l.onContextMenu(o,p))}),t.EFF(1),t.k0s()}if(2&i){const e=c.row;t.R7$(),t.SpI(" ",e.CloudName," ")}}function k(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",25),t.bIt("contextmenu",function(o){const p=t.eBV(e).row,l=t.XpG();return t.Njj(l.onContextMenu(o,p))}),t.EFF(1),t.k0s()}if(2&i){const e=c.row;t.R7$(),t.SpI(" ",e.OnPremise," ")}}function S(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",25),t.bIt("contextmenu",function(o){const p=t.eBV(e).row,l=t.XpG();return t.Njj(l.onContextMenu(o,p))}),t.EFF(1),t.k0s()}if(2&i){const e=c.row;t.R7$(),t.SpI(" ",e.HybridStatus," ")}}function I(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",25),t.bIt("contextmenu",function(o){const p=t.eBV(e).row,l=t.XpG();return t.Njj(l.onContextMenu(o,p))}),t.j41(1,"button",26),t.bIt("click",function(){const o=t.eBV(e).row,p=t.XpG();return t.Njj(p.openClientDetail(o.ClientId))}),t.nrm(2,"span",27),t.k0s(),t.j41(3,"button",26),t.bIt("click",function(){const o=t.eBV(e).row,p=t.XpG();return t.Njj(p.openClientChangeOrder(o.ClientId))}),t.nrm(4,"span",28),t.k0s()()}}function j(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",29)(1,"ul",30)(2,"li",23),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.openClientChangeOrder(o.selectedRow.ClientId))}),t.EFF(3,"Change Order"),t.k0s(),t.j41(4,"li",23),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.openClientDetail(o.selectedRow.ClientId))}),t.EFF(5,"Open Client"),t.k0s()()()}if(2&i){const e=t.XpG();t.Y8G("ngStyle",t.l_i(1,f,e.contextMenuPosition.y+"px",e.contextMenuPosition.x+"px"))}}function D(i,c){if(1&i&&(t.j41(0,"option",31),t.EFF(1),t.k0s()),2&i){const e=c.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}let T=(()=>{class i{constructor(e,a){this.dataService=e,this.router=a,this.rows=[],this.pageSize=5,this.pageSizes=[5,10,15,20,25,30,35],this.page={offset:0},this.paginatedRows=[],this.filteredRows=[],this.searchTerm="",this.contextMenuVisible=!1,this.contextMenuPosition={x:0,y:0}}ngOnInit(){this.fetchData();const e=JSON.parse(localStorage.getItem("crud")||"{}");this.currentUserType=e}fetchData(){this.dataService.getClients().subscribe(e=>{this.rows=e,this.filteredRows=[...this.rows],this.paginatedRows=this.getPaginatedRows()},e=>{console.error("Error fetching data",e)})}onPage(e){this.page.offset=e.offset,this.paginatedRows=this.getPaginatedRows()}onPreviousPage(){this.page.offset>0&&(this.page.offset--,this.paginatedRows=this.getPaginatedRows())}onNextPage(){this.page.offset<Math.ceil(this.filteredRows.length/this.pageSize)-1&&(this.page.offset++,this.paginatedRows=this.getPaginatedRows())}onPageSizeChange(e){this.page.offset=0,this.pageSize=Number(e.target.value),this.paginatedRows=this.getPaginatedRows()}getPaginatedRows(){const e=this.page.offset*this.pageSize;return this.filteredRows.slice(e,e+this.pageSize)}isLastPage(){return this.page.offset>=Math.ceil(this.filteredRows.length/this.pageSize)-1}onSearch(){const e=this.searchTerm.toLowerCase();this.filteredRows=this.rows.filter(a=>a.CloudName.toLowerCase().includes(e)||a.ClientName.toLowerCase().includes(e)||a.OnPremise.toLowerCase().includes(e)||a.HybridStatus.toLowerCase().includes(e)),this.page.offset=0,this.paginatedRows=this.getPaginatedRows()}onContextMenu(e,a){e.preventDefault(),this.contextMenuVisible=!0,this.contextMenuPosition={x:e.clientX,y:e.clientY},this.selectedRow=a}openClientChangeOrder(e){this.router.navigate(["/ChangeClient"],{state:{ClientId:e}})}openClientDetail(e){this.router.navigate(["/ClientDetails"],{state:{ClientId:e}})}onAdd(){this.router.navigate(["/InsertClient"],{})}closeContextMenu(){this.contextMenuVisible=!1}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(u.D),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-client-status"]],hostBindings:function(a,o){1&a&&t.bIt("click",function(){return o.closeContextMenu()},!1,t.EBC)},standalone:!0,features:[t.aNF],decls:33,vars:15,consts:[[1,"p-5"],[1,"mb-5","text-left"],[1,"text-l","font-bold","text-gray-800"],[1,"mb-3","d-flex","justify-content-between"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","input","ngModel"],[3,"click",4,"ngIf"],[1,"material","rounded-lg","border","border-gray-300",3,"page","rows","columnMode","headerHeight","rowHeight","limit","count","offset"],["name","Company","prop","ClientName"],["ngx-datatable-cell-template",""],["name","Cloud","prop","CloudName"],["name","Cloud Type","prop","OnPremise"],["name","Status","prop","HybridStatus"],["name","Actions"],["class","context-menu bg-white shadow-lg rounded-lg p-2 absolute z-10",3,"ngStyle",4,"ngIf"],[1,"d-flex","justify-content-between","mt-3"],[1,"mb-2"],[1,"text-sm","text-black"],[1,"border","border-gray-300","rounded-lg","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"text-sm","text-black","mt-3"],[1,"btn","btn-secondary","me-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["href",t.wXG`https://cdn.syncfusion.com/ej2/ej2-icons/styles/bootstrap5.css`,"rel","stylesheet"],[3,"click"],[1,"btn","btn-primary","ms-2"],[3,"contextmenu"],["mat-icon-button","",3,"click"],[1,"e-icons","e-circle-info","e-large"],[1,"e-icons","e-clock","e-large"],[1,"context-menu","bg-white","shadow-lg","rounded-lg","p-2","absolute","z-10",3,"ngStyle"],[1,"list-none","p-0","m-0"],[3,"value"]],template:function(a,o){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"Client Status"),t.k0s()(),t.j41(4,"div",3)(5,"input",4),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s(),t.DNE(6,b,3,0,"a",5),t.k0s(),t.j41(7,"ngx-datatable",6),t.bIt("page",function(l){return o.onPage(l)}),t.j41(8,"ngx-datatable-column",7),t.DNE(9,w,2,1,"ng-template",8),t.k0s(),t.j41(10,"ngx-datatable-column",9),t.DNE(11,y,2,1,"ng-template",8),t.k0s(),t.j41(12,"ngx-datatable-column",10),t.DNE(13,k,2,1,"ng-template",8),t.k0s(),t.j41(14,"ngx-datatable-column",11),t.DNE(15,S,2,1,"ng-template",8),t.k0s(),t.j41(16,"ngx-datatable-column",12),t.DNE(17,I,5,0,"ng-template",8),t.k0s()(),t.DNE(18,j,6,4,"div",13),t.j41(19,"div",14)(20,"div",15)(21,"p",16),t.EFF(22,"Showing"),t.k0s(),t.j41(23,"select",17),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(l){return o.onPageSizeChange(l)}),t.DNE(24,D,2,2,"option",18),t.k0s(),t.j41(25,"p",19),t.EFF(26),t.k0s()(),t.j41(27,"div")(28,"button",20),t.bIt("click",function(){return o.onPreviousPage()}),t.EFF(29," Previous "),t.k0s(),t.j41(30,"button",21),t.bIt("click",function(){return o.onNextPage()}),t.EFF(31," Next "),t.k0s()()()(),t.nrm(32,"link",22)),2&a&&(t.R7$(5),t.R50("ngModel",o.searchTerm),t.R7$(),t.Y8G("ngIf",1==o.currentUserType),t.R7$(),t.Y8G("rows",o.paginatedRows)("columnMode","force")("headerHeight",50)("rowHeight","auto")("limit",o.pageSize)("count",o.filteredRows.length)("offset",o.page.offset),t.R7$(11),t.Y8G("ngIf",o.contextMenuVisible),t.R7$(5),t.R50("ngModel",o.pageSize),t.R7$(),t.Y8G("ngForOf",o.pageSizes),t.R7$(2),t.SpI("of ",o.filteredRows.length," records"),t.R7$(2),t.Y8G("disabled",0===o.page.offset),t.R7$(2),t.Y8G("disabled",o.isLastPage()))},dependencies:[r.G,_.Sq,_.bT,_.B3,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,s.ge,s.ed,s.QI,m.iY],styles:[".context-menu{position:fixed;width:150px;border:1px solid #ddd;background:#fff;z-index:1000}.context-menu ul{list-style:none;margin:0;padding:0}.context-menu li{padding:8px 12px;cursor:pointer}.context-menu li:hover{background-color:#f0f0f0}\n"],encapsulation:2})}}return i})()}}]);