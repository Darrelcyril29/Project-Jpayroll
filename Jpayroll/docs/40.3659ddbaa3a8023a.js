"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[40],{8064:(w,d,o)=>{o.d(d,{D:()=>u});var n=o(1626),l=o(4438);let u=(()=>{class t{constructor(e){this.http=e,this.GetChangeOrderDetails="backend/GetChangeOrderDetails.php",this.clientsUrl="backend/getClients.php",this.employeesUrl="backend/getEmployees.php",this.changeorderurl="backend/getChangeOrder.php",this.getStatusProgressUrl="backend/GetStatusProgress.php",this.getClientChangeOrders="backend/GetChangeOrderByClientId.php",this.getChangeLogDataByChangeOrder="backend/GetChangeLogDataByChangeOrder.php",this.GetChanageLogById="backend/GetChangeLogById.php",this.getClientbyClientID="backend/GetClientByClientID.php",this.getUsers="backend/GetUser.php",this.getUsersByUserId="backend/GetUserByUserId.php",this.recentchangeorderlog="backend/GetRecentChangeOrderLog.php",this.GetProvince="backend/GetProvince.php",this.GetCountry="backend/GetCountry.php",this.GetCity="backend/GetCity.php",this.GetDistrict="backend/GetDistrict.php",this.GetSubDistrict="backend/GetSubDistrict.php",this.insertchangeorder="backend/InsertChangeOrder.php",this.InsertChangeLog="backend/InsertChangeLog.php",this.insertClient="backend/InsertClient.php",this.InsertUser="backend/InsertUser.php",this.updatechangeorder="backend/UpdateChangeOrder.php",this.updatepassword="backend/ChangePassword.php",this.forgotpassword="backend/ForgotPassword.php",this.UpdateUser="backend/UpdateUser.php",this.updatechangelog="backend/UpdateChangeLogByID.php",this.updateclient="backend/updateClient.php",this.FileUpload="backend/upload.php",this.FileUploadtoDatabase="backend/uploadfiletodatabase.php",this.sendotp="backend/otp/SendOtp.php",this.logincred="backend/LoginCred.php",this.setInactive="backend/SetInactiveDateUser.php",this.deleteChangeOrder="backend/DeleteChangeOrder.php",this.deleteChangeLog="backend/DeleteChangeLog.php"}getRecentChangeOrderLog(){return this.http.get(this.recentchangeorderlog)}getChangeOrder(){return this.http.get(this.changeorderurl)}getChangeOrderDetails(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChangeOrderDetails,{ChangeOrder:e},{headers:s})}GetUsers(){return this.http.get(this.getUsers)}insertUser(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertUser,e,{headers:s})}Updatepassword(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updatepassword,e,{headers:s})}forgotPassword(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.forgotpassword,e,{headers:s})}updateUser(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.UpdateUser,e,{headers:s})}GetUserByUserId(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getUsersByUserId,{UserID:e},{headers:s})}SetInactive(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.setInactive,e,{headers:s})}getClients(){return this.http.get(this.clientsUrl)}getChangeClient(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientChangeOrders,{clientId:e},{headers:s})}getclientByClientID(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientbyClientID,{clientId:e},{headers:s})}getProvince(){return this.http.get(this.GetProvince)}getCountry(){return this.http.get(this.GetCountry)}getCity(){return this.http.get(this.GetCity)}getDistrict(){return this.http.get(this.GetDistrict)}getSubDistrict(){return this.http.get(this.GetSubDistrict)}getEmployees(){return this.http.get(this.employeesUrl)}getStatusProgress(){return this.http.get(this.getStatusProgressUrl)}GetChangeLogDataByChangeOrder(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getChangeLogDataByChangeOrder,{ChangeOrder:e},{headers:s})}getchangelogbyId(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChanageLogById,{ChangeLogId:e},{headers:s})}uploadFile(e){return this.http.post(this.FileUpload,e)}insertChangeLog(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertChangeLog,e,{headers:s})}insertChangeRequest(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.insertchangeorder,e,{headers:s})}InsertClient(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.insertClient,e,{headers:s})}UpdateChangeOrder(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangeorder,e,{headers:s})}UpdateChangeLog(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangelog,e,{headers:s})}UpdateClient(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updateclient,e,{headers:s})}DeleteChangeOrder(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeOrder,e,{headers:s})}DeleteChangeLog(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeLog,e,{headers:s})}LoginCred(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.logincred,e,{headers:s})}sendOtpToEmail(e){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.sendotp,e,{headers:s})}uploadFiletodatabase(e){return this.http.post(this.FileUploadtoDatabase,e)}getUser(){return this.user}setUser(e){this.user=e}static{this.\u0275fac=function(s){return new(s||t)(l.KVO(n.Qq))}}static{this.\u0275prov=l.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},1040:(w,d,o)=>{o.r(d),o.d(d,{default:()=>y});var n=o(4341),l=o(5974),u=o(2389),t=o(4438),m=o(8064),e=o(177);function s(h,C){1&h&&(t.j41(0,"div",14),t.EFF(1," Please provide Old Password "),t.k0s())}function P(h,C){1&h&&(t.j41(0,"div",14),t.EFF(1," Please provide New Password "),t.k0s())}function b(h,C){1&h&&(t.j41(0,"div",14),t.EFF(1," Passwword Missmatched "),t.k0s())}let y=(()=>{class h{encryptToBase64(i){return btoa(i)}constructor(i,r){this.fb=i,this.userService=r,this.ChangePassword=this.fb.group({OldPassword:["",n.k0.required],Password:["",n.k0.required],ConfirmPassword:["",n.k0.required]},{validators:this.passwordsMatchValidator})}ngOnInit(){const i=JSON.parse(localStorage.getItem("currentUser")||"{}");this.UserId=i.UserId}passwordsMatchValidator(i){const r=i.get("Password"),a=i.get("ConfirmPassword");a.setErrors(r&&a&&r.value!==a.value?{passwordsMismatch:!0}:null)}onSubmit(){if(this.ChangePassword.valid){const i={userId:this.UserId,OldPassword:this.ChangePassword.get("OldPassword")?.value,Newpassword:this.ChangePassword.get("Password")?.value};this.userService.Updatepassword(i).subscribe(r=>{("success"===r.status||"error"===r.status)&&alert(r.message)},r=>{console.error("Error:",r),alert("An error occurred while processing your request.")})}else alert("Form is invalid")}static{this.\u0275fac=function(r){return new(r||h)(t.rXU(n.ok),t.rXU(m.D))}}static{this.\u0275cmp=t.VBU({type:h,selectors:[["app-change-password"]],standalone:!0,features:[t.aNF],decls:22,vars:4,consts:[[1,"container","my-5"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","OldPassword",1,"form-label"],["id","OldPassword","formControlName","OldPassword","type","password",1,"form-control"],["class","text-danger small",4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-6"],["for","Password",1,"form-label"],["id","Password","formControlName","Password","type","password",1,"form-control"],["for","ConfirmPassword",1,"form-label"],["id","ConfirmPassword","formControlName","ConfirmPassword","type","password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100"],[1,"text-danger","small"]],template:function(r,a){if(1&r&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Change Password"),t.k0s(),t.j41(3,"form",2),t.bIt("ngSubmit",function(){return a.onSubmit()}),t.j41(4,"div",3)(5,"label",4),t.EFF(6,"Old Password"),t.k0s(),t.nrm(7,"input",5),t.DNE(8,s,2,0,"div",6),t.k0s(),t.j41(9,"div",7)(10,"div",8)(11,"label",9),t.EFF(12,"New Password"),t.k0s(),t.nrm(13,"input",10),t.DNE(14,P,2,0,"div",6),t.k0s(),t.j41(15,"div",8)(16,"label",11),t.EFF(17,"Confirm Password"),t.k0s(),t.nrm(18,"input",12),t.DNE(19,b,2,0,"div",6),t.k0s()(),t.j41(20,"button",13),t.EFF(21,"Submit"),t.k0s()()()),2&r){let p,g,c;t.R7$(3),t.Y8G("formGroup",a.ChangePassword),t.R7$(5),t.Y8G("ngIf",(null==(p=a.ChangePassword.get("OldPassword"))?null:p.invalid)&&(null==(p=a.ChangePassword.get("OldPassword"))?null:p.touched)),t.R7$(6),t.Y8G("ngIf",(null==(g=a.ChangePassword.get("Password"))?null:g.invalid)&&(null==(g=a.ChangePassword.get("Password"))?null:g.touched)),t.R7$(5),t.Y8G("ngIf",(null==(c=a.ChangePassword.get("ConfirmPassword"))?null:c.invalid)&&(null==(c=a.ChangePassword.get("ConfirmPassword"))?null:c.touched))}},dependencies:[l.ae,n.YN,n.qT,n.me,n.BC,n.cb,u.G,e.bT,n.j4,n.JD]})}}return h})()}}]);