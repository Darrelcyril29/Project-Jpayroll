"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[824],{8064:(C,d,c)=>{c.d(d,{D:()=>_});var i=c(1626),e=c(4438);let _=(()=>{class g{constructor(t){this.http=t,this.GetChangeOrderDetails="backend/GetChangeOrderDetails.php",this.clientsUrl="backend/getClients.php",this.employeesUrl="backend/getEmployees.php",this.changeorderurl="backend/getChangeOrder.php",this.getStatusProgressUrl="backend/GetStatusProgress.php",this.getClientChangeOrders="backend/GetChangeOrderByClientId.php",this.getChangeLogDataByChangeOrder="backend/GetChangeLogDataByChangeOrder.php",this.GetChanageLogById="backend/GetChangeLogById.php",this.getClientbyClientID="backend/GetClientByClientID.php",this.getUsers="backend/GetUser.php",this.getUsersByUserId="backend/GetUserByUserId.php",this.recentchangeorderlog="backend/GetRecentChangeOrderLog.php",this.GetProvince="backend/GetProvince.php",this.GetCountry="backend/GetCountry.php",this.GetCity="backend/GetCity.php",this.GetDistrict="backend/GetDistrict.php",this.GetSubDistrict="backend/GetSubDistrict.php",this.insertchangeorder="backend/InsertChangeOrder.php",this.InsertChangeLog="backend/InsertChangeLog.php",this.insertClient="backend/InsertClient.php",this.InsertUser="backend/InsertUser.php",this.updatechangeorder="backend/UpdateChangeOrder.php",this.updatepassword="backend/ChangePassword.php",this.forgotpassword="backend/ForgotPassword.php",this.UpdateUser="backend/UpdateUser.php",this.updatechangelog="backend/UpdateChangeLogByID.php",this.updateclient="backend/updateClient.php",this.FileUpload="backend/upload.php",this.FileUploadtoDatabase="backend/uploadfiletodatabase.php",this.sendotp="backend/otp/SendOtp.php",this.logincred="backend/LoginCred.php",this.setInactive="backend/SetInactiveDateUser.php",this.deleteChangeOrder="backend/DeleteChangeOrder.php",this.deleteChangeLog="backend/DeleteChangeLog.php"}getRecentChangeOrderLog(){return this.http.get(this.recentchangeorderlog)}getChangeOrder(){return this.http.get(this.changeorderurl)}getChangeOrderDetails(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChangeOrderDetails,{ChangeOrder:t},{headers:s})}GetUsers(){return this.http.get(this.getUsers)}insertUser(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertUser,t,{headers:s})}Updatepassword(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.updatepassword,t,{headers:s})}forgotPassword(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.forgotpassword,t,{headers:s})}updateUser(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.UpdateUser,t,{headers:s})}GetUserByUserId(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.getUsersByUserId,{UserID:t},{headers:s})}SetInactive(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.setInactive,t,{headers:s})}getClients(){return this.http.get(this.clientsUrl)}getChangeClient(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientChangeOrders,{clientId:t},{headers:s})}getclientByClientID(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientbyClientID,{clientId:t},{headers:s})}getProvince(){return this.http.get(this.GetProvince)}getCountry(){return this.http.get(this.GetCountry)}getCity(){return this.http.get(this.GetCity)}getDistrict(){return this.http.get(this.GetDistrict)}getSubDistrict(){return this.http.get(this.GetSubDistrict)}getEmployees(){return this.http.get(this.employeesUrl)}getStatusProgress(){return this.http.get(this.getStatusProgressUrl)}GetChangeLogDataByChangeOrder(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.getChangeLogDataByChangeOrder,{ChangeOrder:t},{headers:s})}getchangelogbyId(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChanageLogById,{ChangeLogId:t},{headers:s})}uploadFile(t){return this.http.post(this.FileUpload,t)}insertChangeLog(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertChangeLog,t,{headers:s})}insertChangeRequest(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.insertchangeorder,t,{headers:s})}InsertClient(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.insertClient,t,{headers:s})}UpdateChangeOrder(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangeorder,t,{headers:s})}UpdateChangeLog(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangelog,t,{headers:s})}UpdateClient(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.updateclient,t,{headers:s})}DeleteChangeOrder(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeOrder,t,{headers:s})}DeleteChangeLog(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeLog,t,{headers:s})}LoginCred(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.logincred,t,{headers:s})}sendOtpToEmail(t){const s=new i.Lr({"Content-Type":"application/json"});return this.http.post(this.sendotp,t,{headers:s})}uploadFiletodatabase(t){return this.http.post(this.FileUploadtoDatabase,t)}getUser(){return this.user}setUser(t){this.user=t}static{this.\u0275fac=function(s){return new(s||g)(e.KVO(i.Qq))}}static{this.\u0275prov=e.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},5824:(C,d,c)=>{c.r(d),c.d(d,{default:()=>I});var i=c(2389),e=c(4438),_=c(8064),g=c(6256),u=c(177),t=c(4341),s=c(3380);const m=(o,l)=>({top:o,left:l});function b(o,l){if(1&o){const n=e.RV6();e.j41(0,"a",21),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.onAdd())}),e.j41(1,"button",22),e.EFF(2,"Add"),e.k0s()()}}function f(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",23),e.bIt("contextmenu",function(a){const h=e.eBV(n).row,p=e.XpG();return e.Njj(p.onContextMenu(a,h))}),e.EFF(1),e.k0s()}if(2&o){const n=l.row;e.R7$(),e.SpI(" ",n.Name," ")}}function D(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",23),e.bIt("contextmenu",function(a){const h=e.eBV(n).row,p=e.XpG();return e.Njj(p.onContextMenu(a,h))}),e.EFF(1),e.k0s()}if(2&o){const n=l.row;e.R7$(),e.SpI(" ",n.Usertype," ")}}function U(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",23),e.bIt("contextmenu",function(a){const h=e.eBV(n).row,p=e.XpG();return e.Njj(p.onContextMenu(a,h))}),e.EFF(1),e.k0s()}if(2&o){const n=l.row;e.R7$(),e.SpI(" ",n.InactiveDate," ")}}function w(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",24),e.bIt("contextmenu",function(a){const h=e.eBV(n).row,p=e.XpG();return e.Njj(p.onContextMenu(a,h))}),e.EFF(1),e.k0s()}if(2&o){const n=l.value,r=l.row,a=e.XpG();e.Y8G("ngClass",a.getStatusClass(n)),e.R7$(),e.SpI(" ",r.AccountStatus," ")}}function T(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",25)(1,"ul",26)(2,"li",21),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.openUserDetails(a.selectedRow.UserId))}),e.EFF(3,"User Details"),e.k0s()()()}if(2&o){const n=e.XpG();e.Y8G("ngStyle",e.l_i(1,m,n.contextMenuPosition.y+"px",n.contextMenuPosition.x+"px"))}}function y(o,l){if(1&o&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&o){const n=l.$implicit;e.Y8G("value",n),e.R7$(),e.JRh(n)}}let I=(()=>{class o{getStatusClass(n){switch(n){case"Deactive":return"status-pending";case"Active":return"status-completed";default:return""}}constructor(n,r){this.dataService=n,this.router=r,this.rows=[],this.pageSize=5,this.pageSizes=[5,10,15,20,25,30,35],this.page={offset:0},this.paginatedRows=[],this.filteredRows=[],this.searchTerm="",this.contextMenuVisible=!1,this.contextMenuPosition={x:0,y:0}}ngOnInit(){this.fetchData();const n=JSON.parse(localStorage.getItem("crud")||"{}");this.currentUserType=n}fetchData(){this.dataService.GetUsers().subscribe(n=>{this.rows=n,this.filteredRows=[...this.rows],this.paginatedRows=this.getPaginatedRows()},n=>{console.error("Error fetching data",n)})}onPage(n){this.page.offset=n.offset,this.paginatedRows=this.getPaginatedRows()}onPreviousPage(){this.page.offset>0&&(this.page.offset--,this.paginatedRows=this.getPaginatedRows())}onNextPage(){this.page.offset<Math.ceil(this.filteredRows.length/this.pageSize)-1&&(this.page.offset++,this.paginatedRows=this.getPaginatedRows())}onPageSizeChange(n){this.page.offset=0,this.pageSize=Number(n.target.value),this.paginatedRows=this.getPaginatedRows()}getPaginatedRows(){const n=this.page.offset*this.pageSize;return this.filteredRows.slice(n,n+this.pageSize)}isLastPage(){return this.page.offset>=Math.ceil(this.filteredRows.length/this.pageSize)-1}onSearch(){const n=this.searchTerm.toLowerCase();this.filteredRows=this.rows.filter(r=>r.Name.toLowerCase().includes(n)||r.Usertype.toLowerCase().includes(n)||r.InactiveDate.toLowerCase().includes(n)||r.AccountStatus.toLowerCase().includes(n)),this.page.offset=0,this.paginatedRows=this.getPaginatedRows()}onContextMenu(n,r){n.preventDefault(),this.contextMenuVisible=!0,this.contextMenuPosition={x:n.clientX,y:n.clientY},this.selectedRow=r}openUserDetails(n){this.router.navigate(["/UserDetails"],{state:{UserId:n}})}onAdd(){this.router.navigate(["/InsertUser"],{})}closeContextMenu(){this.contextMenuVisible=!1}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(_.D),e.rXU(g.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-user-data-tabel"]],hostBindings:function(r,a){1&r&&e.bIt("click",function(){return a.closeContextMenu()},!1,e.EBC)},standalone:!0,features:[e.aNF],decls:30,vars:16,consts:[[1,"p-5"],[1,"mb-5","text-left"],[1,"text-l","font-bold","text-gray-800"],[1,"mb-3","d-flex","justify-content-between"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","input","ngModel"],[3,"click",4,"ngIf"],[1,"material","rounded-lg","border","border-gray-300",3,"page","rows","columnMode","headerHeight","rowHeight","limit","count","offset"],["name","User Name","prop","Name"],["ngx-datatable-cell-template",""],["name","User type","prop","Usertype"],["name","Inactive Date","prop","InactiveDate"],["name","Account Status","prop","AccountStatus",3,"cellClass"],["class","context-menu bg-white shadow-lg rounded-lg p-2 absolute z-10",3,"ngStyle",4,"ngIf"],[1,"d-flex","justify-content-between","mt-3"],[1,"mb-2"],[1,"text-sm","text-black"],[1,"border","border-gray-300","rounded-lg","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"text-sm","text-black","mt-3"],[1,"btn","btn-secondary","me-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"click"],[1,"btn","btn-primary","ms-2"],[3,"contextmenu"],[3,"contextmenu","ngClass"],[1,"context-menu","bg-white","shadow-lg","rounded-lg","p-2","absolute","z-10",3,"ngStyle"],[1,"list-none","p-0","m-0"],[3,"value"]],template:function(r,a){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"User Details"),e.k0s()(),e.j41(4,"div",3)(5,"input",4),e.mxI("ngModelChange",function(p){return e.DH7(a.searchTerm,p)||(a.searchTerm=p),p}),e.bIt("input",function(){return a.onSearch()}),e.k0s(),e.DNE(6,b,3,0,"a",5),e.k0s(),e.j41(7,"ngx-datatable",6),e.bIt("page",function(p){return a.onPage(p)}),e.j41(8,"ngx-datatable-column",7),e.DNE(9,f,2,1,"ng-template",8),e.k0s(),e.j41(10,"ngx-datatable-column",9),e.DNE(11,D,2,1,"ng-template",8),e.k0s(),e.j41(12,"ngx-datatable-column",10),e.DNE(13,U,2,1,"ng-template",8),e.k0s(),e.j41(14,"ngx-datatable-column",11),e.DNE(15,w,2,2,"ng-template",8),e.k0s()(),e.DNE(16,T,4,4,"div",12),e.j41(17,"div",13)(18,"div",14)(19,"p",15),e.EFF(20,"Showing"),e.k0s(),e.j41(21,"select",16),e.mxI("ngModelChange",function(p){return e.DH7(a.pageSize,p)||(a.pageSize=p),p}),e.bIt("change",function(p){return a.onPageSizeChange(p)}),e.DNE(22,y,2,2,"option",17),e.k0s(),e.j41(23,"p",18),e.EFF(24),e.k0s()(),e.j41(25,"div")(26,"button",19),e.bIt("click",function(){return a.onPreviousPage()}),e.EFF(27," Previous "),e.k0s(),e.j41(28,"button",20),e.bIt("click",function(){return a.onNextPage()}),e.EFF(29," Next "),e.k0s()()()()),2&r&&(e.R7$(5),e.R50("ngModel",a.searchTerm),e.R7$(),e.Y8G("ngIf",1==a.currentUserType),e.R7$(),e.Y8G("rows",a.paginatedRows)("columnMode","force")("headerHeight",50)("rowHeight","auto")("limit",a.pageSize)("count",a.filteredRows.length)("offset",a.page.offset),e.R7$(7),e.Y8G("cellClass",a.getStatusClass),e.R7$(2),e.Y8G("ngIf",a.contextMenuVisible),e.R7$(5),e.R50("ngModel",a.pageSize),e.R7$(),e.Y8G("ngForOf",a.pageSizes),e.R7$(2),e.SpI("of ",a.filteredRows.length," records"),e.R7$(2),e.Y8G("disabled",0===a.page.offset),e.R7$(2),e.Y8G("disabled",a.isLastPage()))},dependencies:[i.G,u.YU,u.Sq,u.bT,u.B3,t.xH,t.y7,t.me,t.wz,t.BC,t.vS,s.ge,s.ed,s.QI]})}}return o})()}}]);