"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[40],{8064:(w,l,d)=>{d.d(l,{D:()=>C});var n=d(1626),g=d(4438);let C=(()=>{class e{constructor(t){this.http=t,this.GetChangeOrderDetails="backend/GetChangeOrderDetails.php",this.clientsUrl="backend/getClients.php",this.employeesUrl="backend/getEmployees.php",this.changeorderurl="backend/getChangeOrder.php",this.getStatusProgressUrl="backend/GetStatusProgress.php",this.getClientChangeOrders="backend/GetChangeOrderByClientId.php",this.getChangeLogDataByChangeOrder="backend/GetChangeLogDataByChangeOrder.php",this.GetChanageLogById="backend/GetChangeLogById.php",this.getClientbyClientID="backend/GetClientByClientID.php",this.getUsers="backend/GetUser.php",this.getUsersByUserId="backend/GetUserByUserId.php",this.recentchangeorderlog="backend/GetRecentChangeOrderLog.php",this.GetProvince="backend/GetProvince.php",this.GetCountry="backend/GetCountry.php",this.GetCity="backend/GetCity.php",this.GetDistrict="backend/GetDistrict.php",this.GetSubDistrict="backend/GetSubDistrict.php",this.insertchangeorder="backend/InsertChangeOrder.php",this.InsertChangeLog="backend/InsertChangeLog.php",this.insertClient="backend/InsertClient.php",this.InsertUser="backend/InsertUser.php",this.updatechangeorder="backend/UpdateChangeOrder.php",this.updatepassword="backend/ChangePassword.php",this.forgotpassword="backend/ForgotPassword.php",this.UpdateUser="backend/UpdateUser.php",this.updatechangelog="backend/UpdateChangeLogByID.php",this.updateclient="backend/updateClient.php",this.FileUpload="backend/upload.php",this.FileUploadtoDatabase="backend/uploadfiletodatabase.php",this.sendotp="backend/otp/SendOtp.php",this.logincred="backend/LoginCred.php",this.setInactive="backend/SetInactiveDateUser.php",this.deleteChangeOrder="backend/DeleteChangeOrder.php",this.deleteChangeLog="backend/DeleteChangeLog.php"}getRecentChangeOrderLog(){return this.http.get(this.recentchangeorderlog)}getChangeOrder(){return this.http.get(this.changeorderurl)}getChangeOrderDetails(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChangeOrderDetails,{ChangeOrder:t},{headers:s})}GetUsers(){return this.http.get(this.getUsers)}insertUser(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertUser,t,{headers:s})}Updatepassword(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updatepassword,t,{headers:s})}forgotPassword(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.forgotpassword,t,{headers:s})}updateUser(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.UpdateUser,t,{headers:s})}GetUserByUserId(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getUsersByUserId,{UserID:t},{headers:s})}SetInactive(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.setInactive,t,{headers:s})}getClients(){return this.http.get(this.clientsUrl)}getChangeClient(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientChangeOrders,{clientId:t},{headers:s})}getclientByClientID(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getClientbyClientID,{clientId:t},{headers:s})}getProvince(){return this.http.get(this.GetProvince)}getCountry(){return this.http.get(this.GetCountry)}getCity(){return this.http.get(this.GetCity)}getDistrict(){return this.http.get(this.GetDistrict)}getSubDistrict(){return this.http.get(this.GetSubDistrict)}getEmployees(){return this.http.get(this.employeesUrl)}getStatusProgress(){return this.http.get(this.getStatusProgressUrl)}GetChangeLogDataByChangeOrder(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.getChangeLogDataByChangeOrder,{ChangeOrder:t},{headers:s})}getchangelogbyId(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.GetChanageLogById,{ChangeLogId:t},{headers:s})}uploadFile(t){return this.http.post(this.FileUpload,t)}insertChangeLog(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.InsertChangeLog,t,{headers:s})}insertChangeRequest(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.insertchangeorder,t,{headers:s})}InsertClient(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.insertClient,t,{headers:s})}UpdateChangeOrder(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangeorder,t,{headers:s})}UpdateChangeLog(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updatechangelog,t,{headers:s})}UpdateClient(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.updateclient,t,{headers:s})}DeleteChangeOrder(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeOrder,t,{headers:s})}DeleteChangeLog(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.deleteChangeLog,t,{headers:s})}LoginCred(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.logincred,t,{headers:s})}sendOtpToEmail(t){const s=new n.Lr({"Content-Type":"application/json"});return this.http.post(this.sendotp,t,{headers:s})}uploadFiletodatabase(t){return this.http.post(this.FileUploadtoDatabase,t)}getUser(){return this.user}setUser(t){this.user=t}static{this.\u0275fac=function(s){return new(s||e)(g.KVO(n.Qq))}}static{this.\u0275prov=g.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})()},1040:(w,l,d)=>{d.r(l),d.d(l,{default:()=>_});var n=d(9417),g=d(5974),C=d(7651),e=d(4438),m=d(8064),t=d(177);function s(p,u){1&p&&(e.j41(0,"div",17),e.EFF(1," Please provide Old Password "),e.k0s())}function P(p,u){1&p&&(e.j41(0,"div",17),e.EFF(1," Please provide New Password "),e.k0s())}function b(p,u){1&p&&(e.j41(0,"div",17),e.EFF(1," Passwword Missmatched "),e.k0s())}let _=(()=>{class p{toggleOldPasswordVisibility(){this.showOldPassword=!this.showOldPassword}toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}encryptToBase64(i){return btoa(i)}constructor(i,o){this.fb=i,this.userService=o,this.showOldPassword=!1,this.showNewPassword=!1,this.showConfirmPassword=!1,this.ChangePassword=this.fb.group({OldPassword:["",n.k0.required],Password:["",n.k0.required],ConfirmPassword:["",n.k0.required]},{validators:this.passwordsMatchValidator})}ngOnInit(){const i=JSON.parse(localStorage.getItem("currentUser")||"{}");this.UserId=i.UserId}passwordsMatchValidator(i){const o=i.get("Password"),r=i.get("ConfirmPassword");r.setErrors(o&&r&&o.value!==r.value?{passwordsMismatch:!0}:null)}onSubmit(){if(this.ChangePassword.valid){const i={userId:this.UserId,OldPassword:this.ChangePassword.get("OldPassword")?.value,Newpassword:this.ChangePassword.get("Password")?.value};console.log(i),this.userService.Updatepassword(i).subscribe(o=>{("success"===o.status||"error"===o.status)&&alert(o.message)},o=>{console.error("Error:",o),alert("An error occurred while processing your request.")})}else alert("Form is invalid")}static{this.\u0275fac=function(o){return new(o||p)(e.rXU(n.ok),e.rXU(m.D))}}static{this.\u0275cmp=e.VBU({type:p,selectors:[["app-change-password"]],standalone:!0,features:[e.aNF],decls:32,vars:16,consts:[[1,"container","my-5"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","OldPassword",1,"form-label"],[1,"input-group"],["id","OldPassword","formControlName","OldPassword","placeholder","OldPassword",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","text-danger small",4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-6"],["for","Password",1,"form-label"],["id","Password","formControlName","Password","placeholder","New Password",1,"form-control",3,"ngModelChange","type","ngModel"],["for","ConfirmPassword",1,"form-label"],["id","ConfirmPassword","formControlName","ConfirmPassword","placeholder","ConfirmPassword",1,"form-control",3,"ngModelChange","type","ngModel"],["type","submit",1,"btn","btn-primary","w-100"],["rel","stylesheet","href",e.wXG`https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css`],[1,"text-danger","small"]],template:function(o,r){if(1&o&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Change Password"),e.k0s(),e.j41(3,"form",2),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(4,"div",3)(5,"label",4),e.EFF(6,"Old Password"),e.k0s(),e.j41(7,"div",5)(8,"input",6),e.mxI("ngModelChange",function(a){return e.DH7(r.Oldpassword,a)||(r.Oldpassword=a),a}),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return r.toggleOldPasswordVisibility()}),e.nrm(10,"i"),e.k0s()(),e.DNE(11,s,2,0,"div",8),e.k0s(),e.j41(12,"div",9)(13,"div",10)(14,"label",11),e.EFF(15,"New Password"),e.k0s(),e.j41(16,"div",5)(17,"input",12),e.mxI("ngModelChange",function(a){return e.DH7(r.Newpassword,a)||(r.Newpassword=a),a}),e.k0s(),e.j41(18,"button",7),e.bIt("click",function(){return r.toggleNewPasswordVisibility()}),e.nrm(19,"i"),e.k0s()(),e.DNE(20,P,2,0,"div",8),e.k0s(),e.j41(21,"div",10)(22,"label",13),e.EFF(23,"Confirm Password"),e.k0s(),e.j41(24,"div",5)(25,"input",14),e.mxI("ngModelChange",function(a){return e.DH7(r.Confirmpassword,a)||(r.Confirmpassword=a),a}),e.k0s(),e.j41(26,"button",7),e.bIt("click",function(){return r.toggleConfirmPasswordVisibility()}),e.nrm(27,"i"),e.k0s()(),e.DNE(28,b,2,0,"div",8),e.k0s()(),e.j41(29,"button",15),e.EFF(30,"Submit"),e.k0s()()(),e.nrm(31,"link",16)),2&o){let h,a,c;e.R7$(3),e.Y8G("formGroup",r.ChangePassword),e.R7$(5),e.Y8G("type",r.showOldPassword?"text":"password"),e.R50("ngModel",r.Oldpassword),e.R7$(2),e.HbH(r.showOldPassword?"bi bi-eye-slash":"bi bi-eye"),e.R7$(),e.Y8G("ngIf",(null==(h=r.ChangePassword.get("OldPassword"))?null:h.invalid)&&(null==(h=r.ChangePassword.get("OldPassword"))?null:h.touched)),e.R7$(6),e.Y8G("type",r.showNewPassword?"text":"password"),e.R50("ngModel",r.Newpassword),e.R7$(2),e.HbH(r.showNewPassword?"bi bi-eye-slash":"bi bi-eye"),e.R7$(),e.Y8G("ngIf",(null==(a=r.ChangePassword.get("Password"))?null:a.invalid)&&(null==(a=r.ChangePassword.get("Password"))?null:a.touched)),e.R7$(5),e.Y8G("type",r.showConfirmPassword?"text":"password"),e.R50("ngModel",r.Confirmpassword),e.R7$(2),e.HbH(r.showConfirmPassword?"bi bi-eye-slash":"bi bi-eye"),e.R7$(),e.Y8G("ngIf",(null==(c=r.ChangePassword.get("ConfirmPassword"))?null:c.invalid)&&(null==(c=r.ChangePassword.get("ConfirmPassword"))?null:c.touched))}},dependencies:[g.ae,n.YN,n.qT,n.me,n.BC,n.cb,C.G,t.bT,n.j4,n.JD]})}}return p})()}}]);